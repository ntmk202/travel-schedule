import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from "@google/generative-ai";
  
  const genAI = new GoogleGenerativeAI('AIzaSyB9Y8fbYJIpFcSjwW2DB8flZ5s6WvBtu4s');
  
  export const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash", 
  });  
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "1. Locations with their activities, costs, and transportation costs: [{\"id\": \"Honda Lead ( Cũ )\", \"name\": \"Honda Lead ( Cũ )\", \"price_per_day\": \"130.000\", \"type\": \"Bike rental\"}, {\"address\": \"61-63 Hoàng Kế Viêm, Bắc Mỹ Phú, Ngũ Hành Sơn, Đà Nẵng 550000, Vietnam\", \"categoryName\": \"hotel\", \"description\": \"Straightforward rooms, some with balconies, in an informal hotel offering a cafe & a roof terrace.\", \"hotelStars\": \"3-star hotel\", \"id\": \"ChIJn4s4cmMXQjERZUHbVzA2l4s\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipPIVUgYTLeTD1OJNHPkRk6gBgkn0V43isHPvTpM=w408-h271-k-no\", \"location_lat\": 16.0486079, \"location_lng\": 108.2424365, \"phone\": \"+84 905 432 992\", \"placeId\": \"ChIJn4s4cmMXQjERZUHbVzA2l4s\", \"price\": \"đ 500-1200k\", \"reviewsCount\": 1540, \"similarHotelsNearby/0/description\": \"Free breakfast\", \"similarHotelsNearby/0/name\": \"OYO 301 Green Garden Residence Hotel\", \"similarHotelsNearby/0/price\": 10, \"similarHotelsNearby/0/rating\": 4, \"similarHotelsNearby/0/reviews\": 38, \"similarHotelsNearby/1/name\": \"Outpost Bar Hostel\", \"similarHotelsNearby/1/price\": 9, \"similarHotelsNearby/1/rating\": 4.8, \"similarHotelsNearby/1/reviews\": 68, \"similarHotelsNearby/2/name\": \"Danang Moment Boutique serviced Apartment\", \"similarHotelsNearby/2/rating\": 4.8, \"similarHotelsNearby/2/reviews\": 123, \"similarHotelsNearby/3/name\": \"SEN Boutique Villa Apartment\", \"similarHotelsNearby/3/rating\": 4.3, \"similarHotelsNearby/3/reviews\": 47, \"similarHotelsNearby/4/name\": \"Chào Hotel & Apartment Da Nang\", \"similarHotelsNearby/4/rating\": 4.9, \"similarHotelsNearby/4/reviews\": 11, \"similarHotelsNearby/5/name\": \"DANATRI Homestay\", \"similarHotelsNearby/5/rating\": 4.6, \"similarHotelsNearby/5/reviews\": 10, \"similarHotelsNearby/6/name\": \"Lien's Beach Hostel\", \"similarHotelsNearby/6/rating\": 3.8, \"similarHotelsNearby/6/reviews\": 8, \"title\": \"Hanami Hotel Danang\", \"totalScore\": 4.7, \"url\": \"https://www.google.com/maps/search/?api=1&query=Hanami%20Hotel%20Danang&query_place_id=ChIJn4s4cmMXQjERZUHbVzA2l4s\", \"website\": \"https://hanamihotel.com/\"}, {\"address\": \"473X+VJ5, Hoàng Sa, Thọ Quang, Sơn Trà, Đà Nẵng, Vietnam\", \"categoryName\": \"Tourist attraction\", \"description\": \"Son Tra Peninsula comprises of many beaches, including North Beach,ÊSouth BeachÊand Buddha Beach, each of which embraces some part of the dense forest.\", \"id\": \"ChIJXdqykQs-QjER1NZVQLSa7hk\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipM1TkZhr3842J1NqN4ZCVGE-JO7Fg0vbUUdcCpH=w408-h306-k-no\", \"location_lat\": 16.1046475, \"location_lng\": 108.2990988, \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 146, \"peopleAlsoSearch/0/title\": \"Bãi biển Sơn Trà\", \"peopleAlsoSearch/0/totalScore\": 4.8, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 22, \"peopleAlsoSearch/1/title\": \"Bãi Nam - Quán Vườn Tôi\", \"peopleAlsoSearch/1/totalScore\": 4.7, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 34, \"peopleAlsoSearch/2/title\": \"Tho Quang Beach\", \"peopleAlsoSearch/2/totalScore\": 4.5, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 68, \"peopleAlsoSearch/3/title\": \"Bãi Đa\", \"peopleAlsoSearch/3/totalScore\": 4.1, \"peopleAlsoSearch/4/cattegory\": \"People also search for\", \"peopleAlsoSearch/4/reviewsCount\": 120, \"peopleAlsoSearch/4/title\": \"Bãi biển Mân Thái\", \"peopleAlsoSearch/4/totalScore\": 4.7, \"placeId\": \"ChIJXdqykQs-QjER1NZVQLSa7hk\", \"price\": \"free\", \"reviewsCount\": 343, \"title\": \"South Beach Son Tra\", \"totalScore\": 4.4, \"url\": \"https://www.google.com/maps/search/?api=1&query=South%20Beach%20Son%20Tra&query_place_id=ChIJXdqykQs-QjER1NZVQLSa7hk\"}, {\"address\": \"02 Cách Mạng Tháng 8, Hoà Cường Nam, Hải Châu, Đà Nẵng 550000, Vietnam\", \"categoryName\": \"theater\", \"description\": \"The Charming Danang Show is a colorful and lively performance that showcases the history, culture, and beauty of Da Nang through a combination of music, dance, and dramatic reenactments.\", \"id\": \"ChIJiWz-c_EZQjERs-KpIyAIJWw\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipOu-k4P_bA4hiJWHrtSup_9-CLCVjYDnj5rFAzq=w408-h271-k-no\", \"location_lat\": 16.0267188, \"location_lng\": 108.220952, \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 59, \"peopleAlsoSearch/0/title\": \"Charming Danang Hotel\", \"peopleAlsoSearch/0/totalScore\": 3.9, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 0, \"peopleAlsoSearch/1/title\": \"Công Ty Tnhh Charming Tours\", \"peopleAlsoSearch/1/totalScore\": 0, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 0, \"peopleAlsoSearch/2/title\": \"CHARMING TOURS\", \"peopleAlsoSearch/2/totalScore\": 0, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 43, \"peopleAlsoSearch/3/title\": \"Da Nang Charming Tour\", \"peopleAlsoSearch/3/totalScore\": 4.9, \"phone\": \"+84 962 211 818\", \"placeId\": \"ChIJiWz-c_EZQjERs-KpIyAIJWw\", \"popularTimesLiveText\": \"Not busy\", \"price\": \"đ 200-400k\", \"reviewsCount\": 821, \"title\": \"Charming Danang Show\", \"totalScore\": 3.9, \"url\": \"https://www.google.com/maps/search/?api=1&query=Charming%20Danang%20Show&query_place_id=ChIJiWz-c_EZQjERs-KpIyAIJWw\", \"website\": \"https://www.facebook.com/CharmingDanang/\"}, {\"address\": \"24 Lê Hồng Phong, Phước Ninh, Hải Châu, Đà Nẵng 550000, Vietnam\", \"categoryName\": \"cafe\", \"description\": \"Gé Cafe offers a modern and stylish environment, serving a variety of coffee blends and light snacks to its patrons.\", \"id\": \"ChIJbdw0bPoZQjERz0BEiJv3dkY\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipNj471fbsBmUFcHjXxg-ZenwiOuit6ado5vqHpL=w408-h339-k-no\", \"location_lat\": 16.0639729, \"location_lng\": 108.2226686, \"openingHours\": \"6 AM to 3 AM\", \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 2, \"peopleAlsoSearch/0/title\": \"Quán Ca phê\", \"peopleAlsoSearch/0/totalScore\": 4, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 0, \"peopleAlsoSearch/1/title\": \"Cafe 61\", \"peopleAlsoSearch/1/totalScore\": 0, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 75, \"peopleAlsoSearch/2/title\": \"Ngọt Cafe\", \"peopleAlsoSearch/2/totalScore\": 4.4, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 57, \"peopleAlsoSearch/3/title\": \"Kafe de June\", \"peopleAlsoSearch/3/totalScore\": 4.8, \"placeId\": \"ChIJbdw0bPoZQjERz0BEiJv3dkY\", \"popularTimesLiveText\": \"A little busy\", \"price\": \"₫40-80k\", \"reviewsCount\": 483, \"title\": \"Gé Cafe\", \"totalScore\": 4.2, \"url\": \"https://www.google.com/maps/search/?api=1&query=G%C3%A9%20Cafe&query_place_id=ChIJbdw0bPoZQjERz0BEiJv3dkY\", \"website\": \"https://www.facebook.com/gecafedanang\"}, {\"address\": \"250-252 Trần Bạch Đằng, Phước Mỹ, Ngũ Hành Sơn, Đà Nẵng 550000, Vietnam\", \"categoryName\": \"restaurant\", \"description\": \"Bep Ba Ba is a habit that many people have not realized before. Come on, come on! AQUA CITY - AQUA CITY OF VIETNAM - SEA LIFE, OCEAN It is important to note that this product is not for sale in bulk. I'm so excited!\", \"id\": \"ChIJNzgmfwAXQjER-kfWKV2Jx0w\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipNj9Xk1fTpJpbqVaJLyApTyNSfvEBdz5Lb7tu6J=w408-h294-k-no\", \"location_lat\": 16.0491642, \"location_lng\": 108.2477008, \"openingHours\": \"10 AM to 10:30 PM\", \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 5, \"peopleAlsoSearch/0/title\": \"Com bac Pho\", \"peopleAlsoSearch/0/totalScore\": 4, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 1, \"peopleAlsoSearch/1/title\": \"Bep Thu\", \"peopleAlsoSearch/1/totalScore\": 5, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 319, \"peopleAlsoSearch/2/title\": \"Nam restaurant,cuisine PHO ,BBQ ,SEAFOOD ,FRIED RICE,PORRIDGE ,FRIRD NOODLE,Cơm Bắc,Mỳ Quảng\", \"peopleAlsoSearch/2/totalScore\": 4.4, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 322, \"peopleAlsoSearch/3/title\": \"Bếp Ngon Việt- Vietnamese cuisine\", \"peopleAlsoSearch/3/totalScore\": 5, \"phone\": \"+84 971 610 878\", \"placeId\": \"ChIJNzgmfwAXQjER-kfWKV2Jx0w\", \"popularTimesLiveText\": \"Not too busy\", \"price\": \"đ100-200K\", \"reviewsCount\": 334, \"title\": \"Bếp Bà Ba - Ẩm Thực Quê Nhà\", \"totalScore\": 4.6, \"url\": \"https://www.google.com/maps/search/?api=1&query=B%E1%BA%BFp%20B%C3%A0%20Ba%20-%20%E1%BA%A8m%20Th%E1%BB%B1c%20Qu%C3%AA%20Nh%C3%A0&query_place_id=ChIJNzgmfwAXQjER-kfWKV2Jx0w\", \"website\": \"https://www.facebook.com/BepbabaAmthucquenha\"}]\n      2. Weather data for the travel period: [\n  {\n    \"date\": \"Thu, 26 Dec 2024 09:00:00 GMT\",\n    \"temperature\": 22.32,\n    \"description\": \"light rain\"\n  },\n  {\n    \"description\": \"light rain\",\n    \"temperature\": 22.04,\n    \"date\": \"Thu, 26 Dec 2024 12:00:00 GMT\"\n  },\n  {\n    \"temperature\": 21.65,\n    \"date\": \"Thu, 26 Dec 2024 15:00:00 GMT\",\n    \"description\": \"moderate rain\"\n  },\n  {\n    \"description\": \"moderate rain\",\n    \"temperature\": 21.56,\n    \"date\": \"Thu, 26 Dec 2024 18:00:00 GMT\"\n  },\n  {\n    \"description\": \"moderate rain\",\n    \"temperature\": 21.64,\n    \"date\": \"Thu, 26 Dec 2024 21:00:00 GMT\"\n  },\n  {\n    \"date\": \"Fri, 27 Dec 2024 00:00:00 GMT\",\n    \"temperature\": 21.8,\n    \"description\": \"moderate rain\"\n  },\n  {\n    \"temperature\": 22.36,\n    \"date\": \"Fri, 27 Dec 2024 03:00:00 GMT\",\n    \"description\": \"moderate rain\"\n  },\n  {\n    \"date\": \"Fri, 27 Dec 2024 06:00:00 GMT\",\n    \"description\": \"heavy intensity rain\",\n    \"temperature\": 22.1\n  },\n  {\n    \"temperature\": 21.14,\n    \"description\": \"heavy intensity rain\",\n    \"date\": \"Fri, 27 Dec 2024 09:00:00 GMT\"\n  },\n  {\n    \"description\": \"moderate rain\",\n    \"date\": \"Fri, 27 Dec 2024 12:00:00 GMT\",\n    \"temperature\": 21.09\n  },\n  {\n    \"temperature\": 21.74,\n    \"description\": \"moderate rain\",\n    \"date\": \"Fri, 27 Dec 2024 15:00:00 GMT\"\n  },\n  {\n    \"temperature\": 21.9,\n    \"date\": \"Fri, 27 Dec 2024 18:00:00 GMT\",\n    \"description\": \"heavy intensity rain\"\n  },\n  {\n    \"temperature\": 21.3,\n    \"date\": \"Fri, 27 Dec 2024 21:00:00 GMT\",\n    \"description\": \"moderate rain\"\n  },\n  {\n    \"description\": \"moderate rain\",\n    \"date\": \"Sat, 28 Dec 2024 00:00:00 GMT\",\n    \"temperature\": 21.08\n  },\n  {\n    \"description\": \"moderate rain\",\n    \"date\": \"Sat, 28 Dec 2024 03:00:00 GMT\",\n    \"temperature\": 20.61\n  },\n  {\n    \"temperature\": 20.45,\n    \"description\": \"moderate rain\",\n    \"date\": \"Sat, 28 Dec 2024 06:00:00 GMT\"\n  }\n]\n      3. Travel schedule with start and end dates, budget, number of travelers, and transportation mode: {\n  \"startDate\": {\n    \"seconds\": 1735202940,\n    \"nanoseconds\": 0\n  },\n  \"location\": \"Danang\",\n  \"transport\": \"Bike rental\",\n  \"endDate\": {\n    \"seconds\": 1735375740,\n    \"nanoseconds\": 0\n  },\n  \"myAddress\": null,\n  \"budget\": 2500000,\n  \"traveller\": \"Family\"\n}\n\nRecommend an optimal itinerary considering the following factors:\n- Ensure the total cost of locations, activities, and transportation costs does not exceed the budget.\n- Select locations and activities based on the weather conditions and the travelers' preferences.\n- Ensure transportation costs are calculated based on the number of people and the chosen mode of transport (e.g., car, bus).\n- Recommend the best combination of locations to fit the start and end dates, budget, weather, and the number of travelers.\n\nReturn the result in the following JSON format:\n[\n  {\n    \"day\": \"Day 1\",\n    \"date\": \"YYYY-MM-DD\",\n    \"activities\": [\n      {\n        ...<locationsData.data>\n        \"transportationCost\": <transport_cost>,\n        \"note\": \"<notes>\",\n        \"timeVisited\": \"<time_period>\",\n        \"distance_km\": <distance_to_location>\n      }\n    ]\n  },\n  {\n    \"day\": \"Day 2\",\n    \"date\": \"YYYY-MM-DD\",\n    \"activities\": [\n      {\n         ...<locationsData.data>\n        \"transportationCost\": <transport_cost>,\n        \"note\": \"<notes>\",\n        \"timeVisited\": \"<time_period>\",\n        \"distance_km\": <distance_to_location>\n      }\n    ]\n  }\n]"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n[\n  {\n    \"day\": \"Day 1\",\n    \"date\": \"2024-12-26\",\n    \"activities\": [\n      {\n        \"address\": \"61-63 Hoàng Kế Viêm, Bắc Mỹ Phú, Ngũ Hành Sơn, Đà Nẵng 550000, Vietnam\",\n        \"categoryName\": \"hotel\",\n        \"description\": \"Straightforward rooms, some with balconies, in an informal hotel offering a cafe & a roof terrace.\",\n        \"hotelStars\": \"3-star hotel\",\n        \"id\": \"ChIJn4s4cmMXQjERZUHbVzA2l4s\",\n        \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipPIVUgYTLeTD1OJNHPkRk6gBgkn0V43isHPvTpM=w408-h271-k-no\",\n        \"location_lat\": 16.0486079,\n        \"location_lng\": 108.2424365,\n        \"phone\": \"+84 905 432 992\",\n        \"placeId\": \"ChIJn4s4cmMXQjERZUHbVzA2l4s\",\n        \"price\": \"đ 500-1200k\",\n        \"reviewsCount\": 1540,\n        \"title\": \"Hanami Hotel Danang\",\n        \"totalScore\": 4.7,\n        \"url\": \"https://www.google.com/maps/search/?api=1&query=Hanami%20Hotel%20Danang&query_place_id=ChIJn4s4cmMXQjERZUHbVzA2l4s\",\n        \"website\": \"https://hanamihotel.com/\",\n        \"transportationCost\": 0,\n        \"note\": \"Check-in to hotel.  Due to heavy rain, indoor activities are recommended for the evening.\",\n        \"timeVisited\": \"Afternoon/Evening\",\n        \"distance_km\": 0\n      },\n      {\n        \"address\": \"02 Cách Mạng Tháng 8, Hoà Cường Nam, Hải Châu, Đà Nẵng 550000, Vietnam\",\n        \"categoryName\": \"theater\",\n        \"description\": \"The Charming Danang Show is a colorful and lively performance that showcases the history, culture, and beauty of Da Nang through a combination of music, dance, and dramatic reenactments.\",\n        \"id\": \"ChIJiWz-c_EZQjERs-KpIyAIJWw\",\n        \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipOu-k4P_bA4hiJWHrtSup_9-CLCVjYDnj5rFAzq=w408-h271-k-no\",\n        \"location_lat\": 16.0267188,\n        \"location_lng\": 108.220952,\n        \"phone\": \"+84 962 211 818\",\n        \"placeId\": \"ChIJiWz-c_EZQjERs-KpIyAIJWw\",\n        \"price\": \"đ 200-400k\",\n        \"reviewsCount\": 821,\n        \"title\": \"Charming Danang Show\",\n        \"totalScore\": 3.9,\n        \"url\": \"https://www.google.com/maps/search/?api=1&query=Charming%20Danang%20Show&query_place_id=ChIJiWz-c_EZQjERs-KpIyAIJWw\",\n        \"website\": \"https://www.facebook.com/CharmingDanang/\",\n        \"transportationCost\": 130000, \n        \"note\": \"Enjoy the show in the evening.  Transportation cost is estimated based on bike rental.\",\n        \"timeVisited\": \"Evening\",\n        \"distance_km\": 3.5  //Estimated distance\n      }\n    ]\n  },\n  {\n    \"day\": \"Day 2\",\n    \"date\": \"2024-12-27\",\n    \"activities\": [\n      {\n        \"address\": \"24 Lê Hồng Phong, Phước Ninh, Hải Châu, Đà Nẵng 550000, Vietnam\",\n        \"categoryName\": \"cafe\",\n        \"description\": \"Gé Cafe offers a modern and stylish environment, serving a variety of coffee blends and light snacks to its patrons.\",\n        \"id\": \"ChIJbdw0bPoZQjERz0BEiJv3dkY\",\n        \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipNj471fbsBmUFcHjXxg-ZenwiOuit6ado5vqHpL=w408-h339-k-no\",\n        \"location_lat\": 16.0639729,\n        \"location_lng\": 108.2226686,\n        \"openingHours\": \"6 AM to 3 AM\",\n        \"placeId\": \"ChIJbdw0bPoZQjERz0BEiJv3dkY\",\n        \"price\": \"₫40-80k\",\n        \"reviewsCount\": 483,\n        \"title\": \"Gé Cafe\",\n        \"totalScore\": 4.2,\n        \"url\": \"https://www.google.com/maps/search/?api=1&query=G%C3%A9%20Cafe&query_place_id=ChIJbdw0bPoZQjERz0BEiJv3dkY\",\n        \"website\": \"https://www.facebook.com/gecafedanang\",\n        \"transportationCost\": 130000,\n        \"note\": \"Have breakfast here. Transportation cost is estimated based on bike rental.  Consider indoor activities or visiting the cafe later in the day if rain continues.\",\n        \"timeVisited\": \"Morning\",\n        \"distance_km\": 2.7 //Estimated distance\n      },\n      {\n        \"address\": \"250-252 Trần Bạch Đằng, Phước Mỹ, Ngũ Hành Sơn, Đà Nẵng 550000, Vietnam\",\n        \"categoryName\": \"restaurant\",\n        \"description\": \"Bep Ba Ba is a habit that many people have not realized before. Come on, come on! AQUA CITY - AQUA CITY OF VIETNAM - SEA LIFE, OCEAN It is important to note that this product is not for sale in bulk. I'm so excited!\",\n        \"id\": \"ChIJNzgmfwAXQjER-kfWKV2Jx0w\",\n        \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipNj9Xk1fTpJpbqVaJLyApTyNSfvEBdz5Lb7tu6J=w408-h294-k-no\",\n        \"location_lat\": 16.0491642,\n        \"location_lng\": 108.2477008,\n        \"openingHours\": \"10 AM to 10:30 PM\",\n        \"phone\": \"+84 971 610 878\",\n        \"placeId\": \"ChIJNzgmfwAXQjER-kfWKV2Jx0w\",\n        \"price\": \"đ100-200K\",\n        \"reviewsCount\": 334,\n        \"title\": \"Bếp Bà Ba - Ẩm Thực Quê Nhà\",\n        \"totalScore\": 4.6,\n        \"url\": \"https://www.google.com/maps/search/?api=1&query=B%E1%BA%BFp%20B%C3%A0%20Ba%20-%20%E1%BA%A8m%20Th%E1%BB%B1c%20Qu%C3%AA%20Nh%C3%A0&query_place_id=ChIJNzgmfwAXQjER-kfWKV2Jx0w\",\n        \"website\": \"https://www.facebook.com/BepbabaAmthucquenha\",\n        \"transportationCost\": 130000,\n        \"note\": \"Have dinner here. Transportation cost is estimated based on bike rental. Check opening hours before going.\",\n        \"timeVisited\": \"Evening\",\n        \"distance_km\": 1.8 //Estimated distance\n\n      }\n    ]\n  }\n]\n```\n\n**Notes:**\n\n* **Budget:** The provided budget is ample, even with the estimated transportation costs.  Hotel costs are not included as a specific price was not given.\n* **Weather:** The itinerary prioritizes indoor activities on Day 1 and accounts for the persistent rain. Day 2 allows for flexibility depending on weather improvement.\n* **Transportation:**  Transportation costs assume a single Honda Lead rental (130,000 VND/day).  Distances are estimates and actual costs may vary.  Consider using a ride-hailing app for more accurate cost estimates.\n* **Family Preferences:** The itinerary includes a mix of cultural experiences (show) and relaxation (cafe, restaurant).  Adjust activities according to your family's interests.\n* **Hotel:** The hotel cost is not included in the total as the price is a range.  You'll need to factor that into your budget.\n* **Distances:**  The `distance_km` values are approximate and based on Google Maps estimations. Actual distances might slightly vary.\n\n\nThis itinerary is a suggestion; you can modify it based on your family's preferences and real-time weather conditions.  Always check the opening hours of the locations before visiting.\n"},
          ],
        },
      ],
    });

    export const chatRCM = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Recommend locations have in [{\"address\": \"Phú Túc, Hòa Vang, Da Nang, Vietnam\", \"categoryName\": \"Tourist attraction\", \"description\": \"Toom Sara Da Nang is located on the Ba Na - Nui Chua range like a small village hidden in the mountains and forests. Come to the village to immerse yourself in nature, bathe in the stream\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipP182rX3Gxw6zzq5yrS6vyJ4aJse-Ju39GrdebK=w408-h272-k-no\", \"location_lat\": 15.9574226, \"location_lng\": 107.9949721, \"phone\": \"+84 919 225 544\", \"placeId\": \"ChIJq56yCur3QTERYlOCLaSCVwQ\", \"price\": \"đ100K\", \"reviewsCount\": 286, \"similarHotelsNearby/0/description\": \"Free Wi-Fi and parking\", \"similarHotelsNearby/0/name\": \"Nui Than Tai- Ebisu Onsen Resort Da Nang\", \"similarHotelsNearby/0/price\": 65, \"similarHotelsNearby/0/rating\": 4.3, \"similarHotelsNearby/0/reviews\": 1856, \"similarHotelsNearby/1/name\": \"ebisu onsen resort danang\", \"similarHotelsNearby/1/price\": 58, \"similarHotelsNearby/1/rating\": 4.3, \"similarHotelsNearby/1/reviews\": 20, \"similarHotelsNearby/2/description\": \"Higher guest rating\", \"similarHotelsNearby/2/name\": \"V Village Đà Nẵng - Làng quê Việt\", \"similarHotelsNearby/2/price\": 54, \"similarHotelsNearby/2/rating\": 4.8, \"similarHotelsNearby/2/reviews\": 345, \"similarHotelsNearby/3/description\": \"Free breakfast, Wi-Fi, and parking\", \"similarHotelsNearby/3/name\": \"Mercure Danang French Village Bana Hills\", \"similarHotelsNearby/3/rating\": 4.6, \"similarHotelsNearby/3/reviews\": 6486, \"similarHotelsNearby/4/name\": \"Ba Na resorts, hotels\", \"similarHotelsNearby/4/rating\": 4.6, \"similarHotelsNearby/4/reviews\": 27, \"title\": \"Làng Toom Sara Đà Nẵng\", \"totalScore\": 4.3, \"url\": \"https://www.google.com/maps/search/?api=1&query=L%C3%A0ng%20Toom%20Sara%20%C4%90%C3%A0%20N%E1%BA%B5ng&query_place_id=ChIJq56yCur3QTERYlOCLaSCVwQ\", \"website\": \"https://www.toomsaradanang.vn/\"}, {\"address\": \"Bàn cờ, Thọ Quang, Sơn Trà, Đà Nẵng, Vietnam\", \"categoryName\": \"Tourist attraction\", \"description\": \"Hilltop lookout point for views of Da Nang city & the sea, with a pensive, chess-playing statue.\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipPq9NMKrRT1hsHn9i-xdwJ-tS_0wmZFZ9PE1prr=w408-h272-k-no\", \"location_lat\": 16.1189365, \"location_lng\": 108.2719826, \"openingHours\": \"7:30 AM to 5:30 PM\", \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 21, \"peopleAlsoSearch/0/title\": \"Sân bay trực thăng (Địa điểm lịch sử)\", \"peopleAlsoSearch/0/totalScore\": 4.6, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 5, \"peopleAlsoSearch/1/title\": \"Góc chill bên sông hàn\", \"peopleAlsoSearch/1/totalScore\": 4.4, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 1, \"peopleAlsoSearch/2/title\": \"Cổ Cò Chill\", \"peopleAlsoSearch/2/totalScore\": 5, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 11, \"peopleAlsoSearch/3/title\": \"Cầu Cổ Cò\", \"peopleAlsoSearch/3/totalScore\": 4.6, \"placeId\": \"ChIJBQHuNG49QjER7Mb_Y2I64mk\", \"price\": \"free\", \"reviewsCount\": 3498, \"title\": \"Ban Co Peak\", \"totalScore\": 4.6, \"url\": \"https://www.google.com/maps/search/?api=1&query=Ban%20Co%20Peak&query_place_id=ChIJBQHuNG49QjER7Mb_Y2I64mk\"}, {\"address\": \"269 Núi Thành, Hoà Cường Bắc, Hải Châu, Đà Nẵng 50000, Vietnam\", \"categoryName\": \"spa\", \"description\": \"Chua Spa offers a range of traditional Vietnamese and international massages, including full body massages, foot massages, and spa therapies designed to relax and rejuvenate the body.\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipPbLSEX5l31poh9JVR1nJ2gr2kerkRaRiOugVUc=w408-h305-k-no\", \"location_lat\": 16.0433519, \"location_lng\": 108.2216848, \"openingHours\": \"10 AM to 10:30 PM\", \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 0, \"peopleAlsoSearch/0/title\": \"Thổ Spa\", \"peopleAlsoSearch/0/totalScore\": 0, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 47, \"peopleAlsoSearch/1/title\": \"Sài Thành foot massage\", \"peopleAlsoSearch/1/totalScore\": 4.5, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 3, \"peopleAlsoSearch/2/title\": \"Aqua Spa Đà Nẵng\", \"peopleAlsoSearch/2/totalScore\": 4.7, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 40, \"peopleAlsoSearch/3/title\": \"Cỏ Wellness Spa\", \"peopleAlsoSearch/3/totalScore\": 5, \"phone\": \"+84 931 968 269\", \"placeId\": \"ChIJX-QKJKAZQjEROJETWyt2AzM\", \"popularTimesLiveText\": \"Not busy\", \"price\": \"đ 200-1000k\", \"reviewsCount\": 2050, \"title\": \"Chua Spa - Massage Saigon\", \"totalScore\": 4.9, \"url\": \"https://www.google.com/maps/search/?api=1&query=Chua%20Spa%20-%20Massage%20Saigon&query_place_id=ChIJX-QKJKAZQjEROJETWyt2AzM\", \"website\": \"https://chuaspa.vn/\"}, {\"address\": \"XXWQ+VGJ, Hoà Phú, Hòa Vang, Đà Nẵng, Vietnam\", \"categoryName\": \"amusement\", \"description\": \"The amusement park reserves countless funs and surprises, which of course involve well-tailored games to keep little kids occupied and delighted all day long.\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipMj646CLebQBvza8mcGrzbWJrDGuRlVQ98e_axf=w426-h240-k-no\", \"location_lat\": 15.9972041, \"location_lng\": 107.988763, \"openingHours\": \"8:30 AM to 5 PM\", \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 9, \"peopleAlsoSearch/0/title\": \"바나힐\", \"peopleAlsoSearch/0/totalScore\": 4.2, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 46555, \"peopleAlsoSearch/1/title\": \"Ba Na Hills SunWorld\", \"peopleAlsoSearch/1/totalScore\": 4.5, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 0, \"peopleAlsoSearch/2/title\": \"DAI LE PHAT DAN\", \"peopleAlsoSearch/2/totalScore\": 0, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 18, \"peopleAlsoSearch/3/title\": \"Alpine Coaster\", \"peopleAlsoSearch/3/totalScore\": 3.7, \"placeId\": \"ChIJ6R3K0vz2QTERRGpzbkKvt4o\", \"price\": \"đ 150-200k\", \"reviewsCount\": 2229, \"title\": \"Fantasy Park\", \"totalScore\": 4.4, \"url\": \"https://www.google.com/maps/search/?api=1&query=Fantasy%20Park&query_place_id=ChIJ6R3K0vz2QTERRGpzbkKvt4o\"}, {\"address\": \"À, proximité de 1, Hoàng Sa, Thọ Quang, Sơn Trà, Đà Nẵng, Vietnam\", \"categoryName\": \"Tourist attraction\", \"description\": \"Son Tra Peninsula is affectionately known by locals as the precious gem of Danang City. If you are looking for a truly picturesque spot to admire the sunset in Danang, Son Tra Peninsula is an incredibly convincing choice.\", \"imageUrl\": \"https://lh5.googleusercontent.com/p/AF1QipO59-uAKBu8p306nGbOTNNNPGqFwSgODi1UOHEs=w408-h306-k-no\", \"location_lat\": 16.0988444, \"location_lng\": 108.2759335, \"openingHours\": \"5 to 7:30 PM\", \"peopleAlsoSearch/0/category\": \"People also search for\", \"peopleAlsoSearch/0/reviewsCount\": 6, \"peopleAlsoSearch/0/title\": \"Da Nang sea view point\", \"peopleAlsoSearch/0/totalScore\": 4.7, \"peopleAlsoSearch/1/category\": \"People also search for\", \"peopleAlsoSearch/1/reviewsCount\": 2, \"peopleAlsoSearch/1/title\": \"Son Tra Beach\", \"peopleAlsoSearch/1/totalScore\": 5, \"peopleAlsoSearch/2/category\": \"People also search for\", \"peopleAlsoSearch/2/reviewsCount\": 20, \"peopleAlsoSearch/2/title\": \"Son Tra Viewpoint\", \"peopleAlsoSearch/2/totalScore\": 4.9, \"peopleAlsoSearch/3/category\": \"People also search for\", \"peopleAlsoSearch/3/reviewsCount\": 18, \"peopleAlsoSearch/3/title\": \"Sunset view point (bờ kè)\", \"peopleAlsoSearch/3/totalScore\": 4.8, \"peopleAlsoSearch/4/category\": \"People also search for\", \"peopleAlsoSearch/4/reviewsCount\": 1, \"peopleAlsoSearch/4/title\": \"O day co Sup\", \"peopleAlsoSearch/4/totalScore\": 5, \"placeId\": \"ChIJOdUuGAAXQjERCHpVAYnaPD8\", \"price\": \"free\", \"reviewsCount\": 9, \"title\": \"Sunset Point Mui Da Nang\", \"totalScore\": 5, \"url\": \"https://www.google.com/maps/search/?api=1&query=Sunset%20Point%20Mui%20Da%20Nang&query_place_id=ChIJOdUuGAAXQjERCHpVAYnaPD8\"}] for 10 activities that match the weather forecast [{\"date\": \"Wed, 25 Dec 2024 03:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 20.93}, {\"date\": \"Wed, 25 Dec 2024 06:00:00 GMT\", \"description\": \"overcast clouds\", \"temperature\": 21.83}, {\"date\": \"Wed, 25 Dec 2024 09:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 20.6}, {\"date\": \"Wed, 25 Dec 2024 12:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 20.95}, {\"date\": \"Wed, 25 Dec 2024 15:00:00 GMT\", \"description\": \"overcast clouds\", \"temperature\": 21.35}, {\"date\": \"Wed, 25 Dec 2024 18:00:00 GMT\", \"description\": \"overcast clouds\", \"temperature\": 21.84}, {\"date\": \"Wed, 25 Dec 2024 21:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 21.64}, {\"date\": \"Thu, 26 Dec 2024 00:00:00 GMT\", \"description\": \"moderate rain\", \"temperature\": 22.04}, {\"date\": \"Thu, 26 Dec 2024 03:00:00 GMT\", \"description\": \"moderate rain\", \"temperature\": 22.7}, {\"date\": \"Thu, 26 Dec 2024 06:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 22.31}, {\"date\": \"Thu, 26 Dec 2024 09:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 22.67}, {\"date\": \"Thu, 26 Dec 2024 12:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 22.36}, {\"date\": \"Thu, 26 Dec 2024 15:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 21.89}, {\"date\": \"Thu, 26 Dec 2024 18:00:00 GMT\", \"description\": \"moderate rain\", \"temperature\": 21.64}, {\"date\": \"Thu, 26 Dec 2024 21:00:00 GMT\", \"description\": \"moderate rain\", \"temperature\": 21.56}, {\"date\": \"Fri, 27 Dec 2024 00:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 21.66}, {\"date\": \"Fri, 27 Dec 2024 03:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 22.13}, {\"date\": \"Fri, 27 Dec 2024 06:00:00 GMT\", \"description\": \"moderate rain\", \"temperature\": 21.67}, {\"date\": \"Fri, 27 Dec 2024 09:00:00 GMT\", \"description\": \"moderate rain\", \"temperature\": 21.12}, {\"date\": \"Fri, 27 Dec 2024 12:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 21.34}, {\"date\": \"Fri, 27 Dec 2024 15:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 21.5}, {\"date\": \"Fri, 27 Dec 2024 18:00:00 GMT\", \"description\": \"light rain\", \"temperature\": 21.56}] in json format with placeId fields"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "{\"recommendations\": [{\"placeId\": \"ChIJq56yCur3QTERYlOCLaSCVwQ\", \"title\": \"Làng Toom Sara Đà Nẵng\", \"reason\": \"Offers indoor activities and is less affected by rain.\"}, {\"placeId\": \"ChIJX-QKJKAZQjEROJETWyt2AzM\", \"title\": \"Chua Spa - Massage Saigon\", \"reason\": \"Indoor activity, perfect for relaxation during rainy days.\"}, {\"placeId\": \"ChIJ6R3K0vz2QTERRGpzbkKvt4o\", \"title\": \"Fantasy Park\", \"reason\": \"Mostly indoor attractions, suitable for rainy weather.\"}, {\"placeId\": \"ChIJBQHuNG49QjER7Mb_Y2I64mk\", \"title\": \"Ban Co Peak\", \"reason\": \"Offers scenic views even in light rain; may be crowded.\"}, {\"placeId\": \"ChIJOdUuGAAXQjERCHpVAYnaPD8\", \"title\": \"Sunset Point Mui Da Nang\", \"reason\": \"Sunset viewing might be affected by rain; check weather forecast.\"}, {\"placeId\": \"ChIJq56yCur3QTERYlOCLaSCVwQ\", \"title\": \"Làng Toom Sara Đà Nẵng\", \"reason\": \"Can be enjoyed even in light rain; some outdoor activities might be affected\"}, {\"placeId\": \"ChIJX-QKJKAZQjEROJETWyt2AzM\", \"title\": \"Chua Spa - Massage Saigon\", \"reason\": \"Provides indoor relaxation; less affected by weather\"}, {\"placeId\": \"ChIJ6R3K0vz2QTERRGpzbkKvt4o\", \"title\": \"Fantasy Park\", \"reason\": \"Offers many indoor options and provides alternative choices during the rain\"}, {\"placeId\": \"ChIJBQHuNG49QjER7Mb_Y2I64mk\", \"title\": \"Ban Co Peak\", \"reason\": \"Offers great views; the rain might reduce visibility\"}, {\"placeId\": \"ChIJOdUuGAAXQjERCHpVAYnaPD8\", \"title\": \"Sunset Point Mui Da Nang\", \"reason\": \"Sunset might not be clearly visible due to the rain; indoor activities are preferable\"}]}"},
          ],
        },
      ],
    });
  
    
  